{% extends "layouts/default.html.twig" %}
{% block title %} {{ post.title }} {% endblock %}

{% block body %}
    <div class="text-center mt-4">
        <img class="col-3 img-thumbnail text-center" src="../../../{{ post.thumbnail }}" />
    </div>
    <div class="container mt-4">
        <h1 class="text-center">{{ post.title }}</h1>
        <p class="text-center">{{ post.header }}</p>
        <p class="text-center mt-4 mb-4">{{ post.content|raw }}</p>
    </div>
    <hr class="mt-2 mb-3"/>
    <div class="container mt-4">
        <h2 class="text-center">Commentaires</h2>
    </div>
    {% set user = session('user') %}
    {% if user %}
        <div class="container mt-4">
            <form method="POST" action="/news/post/{{post.slug}}/ajout-commentaire" enctype="multipart/form-data">
                <div class="form-group py-2">
                    <label for="content">{{ user.pseudo }}</label>
                    <input name="content" type="textarea" class="form-control" id="content" placeholder="Votre commentaire...">
                    <input name="csrf" type="hidden" value="{{ user.token }}">
                </div>
                <button type="submit" value="submit" name="submit" class="btn btn-primary mt-2">Envoyer</button>
            </form>
        </div>
    {% else %}
        <div class="container mt-4">
            <p>Pour ajouter un commentaire, <a href="/login">connectez-vous</a> sinon <a href="/login">inscrivez-vous</a></p> 
        </div>                        
    {% endif %}
    
    <div class="container mt-4 mb-4">
        <h2>Liste des commentaires</h2>
        {% if flash('success') %}
              <div class="alert alert-success" role="alert">
                {{ flash('success') }}
              </div>
            {% endif %}
        {% if comments is not empty %}
            {% for comment in comments %}
            <div class="card mt-2">
                <div class="card-body">
                    <h5 class="card-title">{{ comment.pseudo }}</h5>
                    {{ comment.commentContent}}
                </div>
            </div>
            {% endfor %}
            <nav aria-label="Page navigation example">
              <ul class="pagination justify-content-center">
                <li class="page-item"><a class="page-link" href="#">Moins</a></li>
                <li class="page-item"><a class="page-link" href="#">1</a></li>
                <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
                <li class="page-item"><a class="page-link" href="#">Plus</a></li>
              </ul>
            </nav>
        {% else %}
          <p>Aucun commentaire pour le moment, ajoutez-en un !</p>    
        {% endif %}
        
    </div>
{% endblock %}